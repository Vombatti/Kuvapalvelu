Luodaan taulut


CREATE TABLE Kv_Profiilit(
proID INT PRIMARY KEY AUTO_INCREMENT,
Email CHAR(50),
Etunimi CHAR(25),
Sukunimi CHAR(25),
Syaika DATE,
Kayttaja CHAR(25),
Salasana CHAR(25)
)ENGINE=MYISAM;




CREATE TABLE Kv_Kuvat(
kuvatID INT PRIMARY KEY AUTO_INCREMENT,
Nimi CHAR(25), 
Kuvateksti CHAR(255),
Sijainti CHAR(25),
Polku CHAR(255)
)ENGINE=MYISAM;


CREATE TABLE Kv_Arvostelut(
arvID INT PRIMARY KEY AUTO_INCREMENT,
Kayttaja CHAR(25),
Kuvanimi CHAR(50),
Tahdet INT
)ENGINE=MYISAM;


CREATE TABLE Kv_Kommentit(
komID INT PRIMARY KEY AUTO_INCREMENT,
Kayttajanimi CHAR(25),
Kommentti CHAR(255)
)ENGINE=MYISAM;


CREATE TABLE Kv_Tunnistetiedot(
tunID INT PRIMARY KEY AUTO_INCREMENT,
Tunnistenimi CHAR(25),
Kayttajanimi CHAR(50),
Kuvanimi CHAR(50)
)ENGINE=MYISAM;


Lisätään viiteavaimet


ALTER TABLE Kv_Profiilit
ADD FOREIGN KEY (Kayttaja)
REFERENCES Kuvat(kuvatID);


ALTER TABLE Kv_Profiilit
ADD FOREIGN KEY (Kayttaja)
REFERENCES Arvostelut(arvID);


ALTER TABLE Kv_Kuvat
ADD FOREIGN KEY (Nimi)
REFERENCES Arvostelut(arvID);


ALTER TABLE Kv_Kuvat
ADD FOREIGN KEY (Nimi)
REFERENCES Kommentit(komID);


ALTER TABLE Kv_Kuvat
ADD FOREIGN KEY (Nimi)
REFERENCES Tunnistetiedot(tunID);


Syötetään dataa




INSERT INTO Kv_Profiilit(Email, Etunimi, Sukunimi, Syaika, Kayttaja, Salasana)
VALUES(
'juha.selonen@metropolia.fi',
'Juha',
'Selonen',
'1978-10-12',
'Juha',
'salasana'
),(
'henriikka.makela2@metropolia.fi',
'Henriikka',
'Mäkelä',
'1993-10-26',
'Henriikka',
'testi123');




##########################################################
LISÄÄ KUVIA


INSERT INTO Kv_Kuvat(Nimi, Kuvateksti, Sijainti, Polku)
VALUES(
'Testikuva',
'Testikuva1',
'12.3456, -98.7654',
'kuvat/testi.png'
);




INSERT INTO Kv_Kuvat(Nimi, Kuvateksti, Sijainti, Polku)
VALUES(
'Testikuva2',
'Testikuva2',
'14.34456, -98.7454',
'kuvat/testi.png'
);




INSERT INTO Kv_Kuvat(Nimi, Kuvateksti, Sijainti, Polku)
VALUES(
'Testikuva3',
'Testaan kuvia',
'14.34456, -98.7454',
'kuvat/laaja2.jpg'
);


#############################################################


INSERT INTO Kv_Arvostelut (Kayttaja, Kuvanimi, Tahdet)
VALUES(
'Juha',
'Testikuva',
5
);


INSERT INTO Kv_Arvostelut (Kayttaja, Kuvanimi, Tahdet)
VALUES(
'Henriikka',
'Testikuva2',
5
);




INSERT INTO Kv_Kommentit(Kayttajanimi, Kommentti)
VALUES(
'Juha',
'Kommentoin tätä kuvaa'
);


INSERT INTO Kv_Kommentit(Kayttajanimi, Kommentti)
VALUES(
'Henriikka',
'Kommentoin tätä kuvaa myöskin'
);


INSERT INTO Kv_Tunnistetiedot(Tunnistenimi, Kayttajanimi, Kuvanimi)
VALUES(
'Testi',
'Juha',
'Testi1'
);


INSERT INTO Kv_Tunnistetiedot(Tunnistenimi, Kayttajanimi, Kuvanimi)
VALUES(
'Testi2',
'Henriikka',
'Testi2'
);


Hakuja 


SELECT 
*
FROM
Kayttajat;


SELECT 
*
FROM
Profiilit;






